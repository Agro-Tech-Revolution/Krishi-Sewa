{% extends 'layout-farmers.html' %}

{% load static %}

{% block title %}
<title>Total Income and Expenses</title>
<link href="{% static 'farmers/css/details.css' %}" rel="stylesheet">
{% endblock title %}

{% block content %}
    <div class="row">
        <div class="container">
            <h3 class="text-center mt-5">Income Details Table</h3> 
            <div class="justify-content-center mt-3">
            <div style="height:50vh; overflow-y: scroll;">
                <table class="table table-striped table-bordered table-sm w-100 text-center mt-2 ">
                    <thead>
                        <tr>
                        <th scope="col">S.N.</th>
                        <th scope="col">Date</th>
                        <th scope="col">Particular</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Price</th>
                        <th scope="col">Remarks</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for income in all_details.Income %}
                        <tr>
                            <th scope="row">{{forloop.counter}}</th>
                            <td>{{income.date}}</td>
                            <td>{{income.particular}}</td>
                            <td>{{income.quantity}} kg</td>
                            <td>NRs. {{income.price}}</td> 
                            <td>
                                {% if income.remarks %}
                                    {{income.remarks}}
                                {% else %}
                                    -
                                {% endif %}
                            </td>               
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="container"> 
        <h3 class="text-center">Expense Details Table</h3> 
        <div class="justify-content-center mt-3">
            <div style="height:50vh; overflow-y: scroll;">
            <table class="table table-striped table-bordered table-sm text-center mt-2 ">
                <thead>
                    <tr>
                    <th scope="col">S.N.</th>
                    <th scope="col">Date</th>
                    <th scope="col">Type</th>
                    <th scope="col">Particular</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Price</th>
                    <th scope="col">Duration</th>
                    <th scope="col">Remarks</th>
                    </tr>

                </thead>
                <tbody>
                    {% for expense in all_details.Expenses %}
                        <tr>
                        
                            <th scope="row">{{forloop.counter}}</th>
                            <td>{{expense.date}}</td>
                            <td>{{expense.type}}</td>
                            <td>{{expense.particular}}</td>
                            <td>{{expense.quantity}}</td>
                            <td>{{expense.amount}}</td> 
                            <td>{{expense.duration}}</td>
                            <td>
                                {% if expense.remarks %}
                                    {{expense.remarks}}
                                {% else %}
                                    -
                                {% endif %}
                            </td>   
                               
                        </tr>
                    {% endfor %} 
        
                </tbody>
            </table>
            </div>
        </div>
        </div>
    </div>

    
         <!-- <div class="form-div ml-5 p-3 ">
            <div class="form-group p-5 d-inline-block ">
                <label  class="form-label h6 font-weight-bold">Total Income:</label>
                <input type="number" class="form-control" required="">
            </div>
    
            <div class="form-group p-5 d-inline-block ">
                <label  class="form-label h6 font-weight-bold">Total Expense:</label>
                <input type="number" class="form-control" required="">
            </div>

            <div class="form-group p-5 d-inline-block ">
                <label  class="form-label h6 font-weight-bold">Total Profit:</label>
                <input type="number" class="form-control" required="">
            </div>
            <div class="form-group p-5 d-inline-block ">
                <label  class="form-label h6 font-weight-bold">Total Loss:</label>
                <input type="number" class="form-control" required="">
            </div>

        </div>  -->
        <div class="card">
            <div class="card-body text-center">
                <h3 class="card-title">Final Report</h5>
                <div class="card-text">
                    <h6>Total Income: NRs. {{all_details.TotalIncome}}</h6>
                    <h6>Total Expenses: NRs. {{all_details.TotalExpense}}</h6>
                    <h6>
                        Net Amount NRs. {{net_amount}}
                        {% if all_details.NetAmount > 0 %}
                            <em>(Profit)</em>
                        {% else %}
                            <em>(Loss)</em>
                        {% endif %}
                    </h6>
                </div>
                
            </div>
        </div>

    
{% endblock content %}