{% extends 'layout-farmers.html' %}

{% load static %}

{% block title %}
<title>Total Income and Expenses</title>
{% endblock title %}

{% block content %}

    <div class="w-75 mx-auto shadow-lg p-3 mb-3 mt-5 rounded">

    <div class="row justify-content-center px-3">    
        <div class="accordion w-100" id="accordionExample">
            <div class="card">
              <div class="card-header" id="headingOne">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left text-center" type="button" style="color:#b67721; font-size: 20px" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Income Details Table
                  </button>
                </h2>
              </div>
          
              <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="row">
                        <div class="container bg-light">
                            
                            <div class="row">
                              <div class="w-100" style="height:40vh; overflow-y: scroll;">
                                <table class="table table-striped table-bordered table-sm text-center mt-2 ">
                                  <thead>
                                      <tr>
                                      <th scope="col">S.N.</th>
                                      <th scope="col">Date</th>
                                      <th scope="col">Particular</th>
                                      <th scope="col">Quantity</th>
                                      <th scope="col">Price</th>
                                      <th scope="col">Remarks</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      {% for income in all_details.Income %}
                                      <tr>
                                          <th scope="row">{{forloop.counter}}</th>
                                          <td>{{income.date}}</td>
                                          <td>{{income.particular}}</td>
                                          <td>{{income.quantity}} kg</td>
                                          <td>NRs. {{income.price}}</td> 
                                          <td>
                                              {% if income.remarks %}
                                                  {{income.remarks}}
                                              {% else %}
                                                  -
                                              {% endif %}
                                          </td>               
                                      </tr>
                                      {% endfor %}

                                  </tbody>
                                </table>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingTwo">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed text-center" type="button" style="color:#b67721; font-size: 20px" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Expense Details Table
                  </button>
                </h2>
              </div>
              <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="row mt-2">
                        <div class="container bg-light"> 
                          <div class="row">
                            <div class="w-100" style="height:40vh; overflow-y: scroll;">
                              <table class="table table-striped table-bordered table-sm text-center mt-2 ">
                                <thead>
                                    <tr>
                                    <th scope="col">S.N.</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Particular</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Duration</th>
                                    <th scope="col">Remarks</th>
                                    </tr>

                                </thead>
                                <tbody>
                                    {% for expense in all_details.Expenses %}
                                        <tr>
                                        
                                            <th scope="row">{{forloop.counter}}</th>
                                            <td>{{expense.date}}</td>
                                            <td>{{expense.type}}</td>
                                            <td>{{expense.particular}}</td>
                                            <td>{{expense.quantity}}</td>
                                            <td>{{expense.amount}}</td> 
                                            <td>{{expense.duration}}</td>
                                            <td>
                                                {% if expense.remarks %}
                                                    {{expense.remarks}}
                                                {% else %}
                                                    -
                                                {% endif %}
                                            </td>   
                                              
                                        </tr>
                                    {% endfor %} 
                        
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingThree">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed text-center" type="button" style="color:#b67721; font-size: 20px" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Result
                  </button>
                </h2>
              </div>
              <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="justify-content-center mt-2">
                        <div class="row">
                            
                            <div class="col-4 d-inline-block ">
                                <label  class="h6" style="color:#b67721; font-size: 18px">Total Income: {{all_details.TotalIncome}}</label> 
                            </div>
                            <div class="col-4 d-inline-block">
                                <label  class="h6" style="color:#b67721; font-size: 18px">Total Expense: {{all_details.TotalExpense}}</label>
                            </div>
                            <div class="col-4 d-inline-block ">
                                <label  class="h6" style="color:#b67721; font-size: 18px">Net Amount: {{net_amount}}</label>
                                {% if all_details.NetAmount > 0 %}
                                    <em>(Profit)</em>
                                {% else %}
                                    <em>(Loss)</em>
                                {% endif %} 
                            </div>
                            
                        </div>
                    </div>
                </div>
              </div>
            </div>
        </div>
    </div>
{% endblock content %}